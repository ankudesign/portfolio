
var app=function(){function a(){z.click(function(a){a.preventDefault(),t.toggleClass("nav-is-open")}),setTimeout(function(){y.addClass("can-transition")},1);var a=function(){w>10?t.addClass("is-scrolled"):t.removeClass("is-scrolled"),window.requestAnimationFrame(a)};a()}

function f(){function a(){f[0].paused&&(f[0].play(),g.addClass("is-hidden"),h.addClass("is-visible"))}

function b(){f[0].pause(),g.removeClass("is-hidden"),h.removeClass("is-visible")}

function c(){f[0].currenTime=0,f[0].play(),i.removeClass("is-visible"),h.addClass("is-visible")}

function d(){h.removeClass("is-visible"),i.addClass("is-visible")}var e=$(this),f=e.find("video"),g=e.find(".video-play"),h=e.find(".video-pause"),i=e.find(".video-replay");g.click(a),h.click(b),i.click(c),f.on("ended",d)}


function h(){function a(){e.attr("height",f),28>=f&&(f+=2,c=requestAnimationFrame(a))}

function b(){e.attr("height",f),f>=2&&(f-=2,c=requestAnimationFrame(b))}var c,d=$("#js-down-arrow"),e=d.find("#down-arrow-fill"),f=0;$(".down-arrow").hover(function(){cancelAnimationFrame(c),c=requestAnimationFrame(a)},function(){cancelAnimationFrame(c),c=requestAnimationFrame(b)}),$("#js-down-btn").on("click",function(){$("htmll, body").animate({scrollTop:u-x.height()},500)})}

function i(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}

function j(a,b,c){var d=$(a);d.length>0&&d.each(function(){function a(a){var b=function(){switch(e=h/j,a){case"in":f=1>=e,h++;break;case"out":f=e>=0,h--}if(f){for(var c=0;c<m.length;c++){var g=0-n[c];m[c].style.strokeDashoffset=i(e,n[c],g,1)}d=window.requestAnimationFrame(b)}};b()}for(var d,e,f,g,h=0,j=c,k=$(this).find("svg"),g=k.find("path"),m=new Array,n=new Array,o=0;o<g.length;o++)m[o]=g[o],l=m[o].getTotalLength(),n[o]=l,m[o].style.strokeDasharray=l+" "+(l+2),m[o].style.strokeDashoffset=l;"hover"==b?$(this).hover(function(){window.cancelAnimationFrame(d),a("in")},function(){window.cancelAnimationFrame(d),a("out")}):a("in")})}

function k(){var a=$("#js-aptitutes"),b=["apps","editorial","books","maps","packages","services"],c=0;v>A&&setInterval(function(){a.text(b[c]),c<b.length?c++:c=0},600)}


function m(){var a,b,c=$("#video-player"),d=c.find(".video-container"),e=c.find("iframe"),f=e.attr("src").split("?")[0];s.resize(function(){v*(9/16)>u-120?(b=u-120,a=b*(16/9),d.css({width:a,height:b})):(a=v-40,b=a*(9/16),d.css({width:a,height:b}))}).resize(),$("#js-play-btn").on("click",function(a){a.preventDefault(),c.fadeIn(500).addClass("open");var b={method:"play"};e[0].contentWindow.postMessage(JSON.stringify(b),f)}),$("#js-close-btn").on("click",function(a){a.preventDefault(),c.removeClass("open").fadeOut(500);var b={method:"pause"};e[0].contentWindow.postMessage(JSON.stringify(b),f)})}

function n(a,b,c){c||(c=window.location.href);var d=new RegExp("([?&])"+a+"=.*?(&|#|$)(.*)","gi");if(d.test(c)){if("undefined"!=typeof b&&null!==b)return c.replace(d,"$1"+a+"="+b+"$2$3");var e=c.split("#");return c=e[0].replace(d,"$1$3").replace(/(&|\?)$/,""),"undefined"!=typeof e[1]&&null!==e[1]&&(c+="#"+e[1]),c}if("undefined"!=typeof b&&null!==b){var f=-1!==c.indexOf("?")?"&":"?",e=c.split("#");return c=e[0]+f+a+"="+b,"undefined"!=typeof e[1]&&null!==e[1]&&(c+="#"+e[1]),c}return c}

function p(){a(),$(".video-player").length>0&&e(),s.scroll(function(){w=s.scrollTop()}),s.resize(function(){u=s.height(),v=s.width()})}var q,r,s=$(window),t=$("body"),u=s.height(),v=s.width(),w=s.scrollTop(),x=$("#js-header"),y=$("#js-nav"),z=$("#js-nav-trigger"),A=640;return{init:p,homeNav:b,videoPlayer:m,arrowAnim:h,aptitutes:k}}();